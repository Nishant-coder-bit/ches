generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL") // Set your database URL in the .env file
}
model User {
  id               Int      @id @default(autoincrement())
  name             String
  email            String   @unique
  gamesAsPlayer1   Game[]   @relation("Player1Games")
  gamesAsPlayer2   Game[]   @relation("Player2Games")
  gamesAsWinner    Game[]   @relation("WinnerGames")
  friends          Friend[] @relation("UserFriends")
  friended         Friend[] @relation("FriendOfUsers")
}


model Game {
 id String @id @default(uuid()) 
  createdAt DateTime @default(now())
  player1  User   @relation("Player1Games", fields: [player1Id], references: [id])
  player1Id Int
  player2  User   @relation("Player2Games", fields: [player2Id], references: [id])
  player2Id Int
  winner   User?  @relation("WinnerGames", fields: [winnerId], references: [id])
  winnerId Int?
  moves String @default("") 
  fen   String @default("")
}


model Friend {
  id        String   @id @default(uuid()) @unique
  userId     Int 
  friendId  Int   
  createdAt DateTime @default(now())

   user     User   @relation("UserFriends", fields: [userId], references: [id])

  friend   User   @relation("FriendOfUsers", fields: [friendId], references: [id])


  @@map("friends") // Maps this model to the "friends" table in PostgreSQL
}
